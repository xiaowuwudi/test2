<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½èŠå¤©åŠ©æ‰‹ - æ’©å¦¹ç¥å™¨</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>æ™ºèƒ½èŠå¤©åŠ©æ‰‹ ğŸ’¬</h1>
    <textarea id="chat-input" placeholder="è¯·ç²˜è´´å¯¹æ–¹çš„èŠå¤©å†…å®¹..."></textarea>
    
    <div class="style-grid">
        <!-- ç¬¬ä¸€è¡Œ -->
        <div class="style-btn" data-style="é«˜æƒ…å•†">é«˜æƒ…å•†</div>
        <div class="style-btn" data-style="æ’©å¥³ç”Ÿ">æ’©å¥³ç”Ÿ</div>
        <div class="style-btn" data-style="å¹½é»˜">å¹½é»˜</div>
        <!-- ç¬¬äºŒè¡Œ -->
        <div class="style-btn" data-style="è´´å¿ƒæš–ç”·">è´´å¿ƒæš–ç”·</div>
        <div class="style-btn" data-style="æƒ…åœºé«˜æ‰‹">æƒ…åœºé«˜æ‰‹</div>
        <div class="style-btn" data-style="æˆç†Ÿç¨³é‡">æˆç†Ÿç¨³é‡</div>
        <!-- ç¬¬ä¸‰è¡Œ -->
        <div class="style-btn" data-style="æ¸©æŸ”å¤§å”">æ¸©æŸ”å¤§å”</div>
        <div class="style-btn" data-style="æš§æ˜§æ‹‰æ‰¯">æš§æ˜§æ‹‰æ‰¯</div>
        <div class="style-btn" data-style="é€—æ¯”">é€—æ¯”</div>
    </div>

    <button id="generate-btn">ç”Ÿæˆç¥å›å¤</button>

    <div id="result-container"></div>

    <script>
        const API_KEY = 'sk-fegrphpfouumnomwsqolzpsezlicvogqaautkvsjjwqhfrlf';
        let selectedStyle = null;

        // é£æ ¼é€‰æ‹©é€»è¾‘
        document.querySelectorAll('.style-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedStyle = btn.dataset.style;
            });
        });

        // ç”Ÿæˆå›å¤é€»è¾‘
        document.getElementById('generate-btn').addEventListener('click', async () => {
            const inputText = document.getElementById('chat-input').value.trim();
            if (!inputText || !selectedStyle) {
                alert('è¯·å…ˆè¾“å…¥èŠå¤©å†…å®¹å¹¶é€‰æ‹©é£æ ¼ï¼');
                return;
            }

            const btn = document.getElementById('generate-btn');
            btn.disabled = true;
            btn.innerHTML = 'ç”Ÿæˆä¸­<span class="loading-dots"></span>';

            try {
                const response = await fetch('https://api.siliconflow.cn/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "deepseek-ai/DeepSeek-V2.5",
                        messages: [{
                            role: "user",
                            content: `è¯·ç”¨${selectedStyle}é£æ ¼å›å¤ä»¥ä¸‹å†…å®¹ï¼Œç”Ÿæˆ3æ¡ä¸åŒå›å¤ï¼š${inputText}`
                        }],
                        temperature: 0.7,
                        n: 3
                    })
                });

                const data = await response.json();
                showResults(data.choices);
            } catch (error) {
                alert('ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ç”Ÿæˆç¥å›å¤';
            }
        });

        // æ˜¾ç¤ºç»“æœ
        function showResults(choices) {
            const container = document.getElementById('result-container');
            container.innerHTML = choices.map((choice, index) => `
                <div class="result-item">
                    <div class="result-style">${selectedStyle}æ–¹æ¡ˆ ${index + 1}</div>
                    <div class="result-content">${choice.message.content}</div>
                    <button class="copy-btn" onclick="copyText(this)">å¤åˆ¶</button>
                </div>
            `).join('');
        }

        // å¤åˆ¶åŠŸèƒ½
        window.copyText = function(button) {
            const text = button.previousElementSibling.innerText;
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'å·²å¤åˆ¶ï¼';
                setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
            });
        }
    </script>
</body>
</html>